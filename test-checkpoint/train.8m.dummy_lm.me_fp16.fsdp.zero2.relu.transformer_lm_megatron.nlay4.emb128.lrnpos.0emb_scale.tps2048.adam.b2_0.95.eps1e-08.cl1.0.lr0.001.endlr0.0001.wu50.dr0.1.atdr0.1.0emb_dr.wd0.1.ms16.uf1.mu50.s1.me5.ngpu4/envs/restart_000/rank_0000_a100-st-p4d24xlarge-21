AZ=us-east-1c
BASH_ENV=/usr/share/modules/init/bash
BASH_FUNC_module%%=() {  unset _mlre _mlIFS _mlshdbg;
 if [ "${MODULES_SILENT_SHELL_DEBUG:-0}" = '1' ]; then
 case "$-" in 
 *v*x*)
 set +vx;
 _mlshdbg='vx'
 ;;
 *v*)
 set +v;
 _mlshdbg='v'
 ;;
 *x*)
 set +x;
 _mlshdbg='x'
 ;;
 *)
 _mlshdbg=''
 ;;
 esac;
 fi;
 if [ -n "${IFS+x}" ]; then
 _mlIFS=$IFS;
 fi;
 IFS=' ';
 for _mlv in ${MODULES_RUN_QUARANTINE:-};
 do
 if [ "${_mlv}" = "${_mlv##*[!A-Za-z0-9_]}" -a "${_mlv}" = "${_mlv#[0-9]}" ]; then
 if [ -n "`eval 'echo ${'$_mlv'+x}'`" ]; then
 _mlre="${_mlre:-}${_mlv}_modquar='`eval 'echo ${'$_mlv'}'`' ";
 fi;
 _mlrv="MODULES_RUNENV_${_mlv}";
 _mlre="${_mlre:-}${_mlv}='`eval 'echo ${'$_mlrv':-}'`' ";
 fi;
 done;
 if [ -n "${_mlre:-}" ]; then
 _mlre="eval ${_mlre}";
 fi;
 eval `${_mlre:-}/usr/bin/tclsh /usr/lib/x86_64-linux-gnu/modulecmd.tcl bash $*`;
 _mlstatus=$?;
 if [ -n "${_mlIFS+x}" ]; then
 IFS=$_mlIFS;
 else
 unset IFS;
 fi;
 if [ -n "${_mlshdbg:-}" ]; then
 set -$_mlshdbg;
 fi;
 unset _mlre _mlv _mlrv _mlIFS _mlshdbg;
 return $_mlstatus
}
BASH_FUNC_switchml%%=() {  typeset swfound=1;
 if [ "${MODULES_USE_COMPAT_VERSION:-0}" = '1' ]; then
 typeset swname='main';
 if [ -e /usr/lib/x86_64-linux-gnu/modulecmd.tcl ]; then
 typeset swfound=0;
 unset MODULES_USE_COMPAT_VERSION;
 fi;
 else
 typeset swname='compatibility';
 if [ -e /usr/lib/x86_64-linux-gnu/modulecmd-compat ]; then
 typeset swfound=0;
 MODULES_USE_COMPAT_VERSION=1;
 export MODULES_USE_COMPAT_VERSION;
 fi;
 fi;
 if [ $swfound -eq 0 ]; then
 echo "Switching to Modules $swname version";
 source /usr/share/modules/init/bash;
 else
 echo "Cannot switch to Modules $swname version, command not found";
 return 1;
 fi
}
BROWSER=/data/home/nikbash/.vscode-server/bin/e8a3071ea4344d9d48ef8a4df2c097372b0c5161/bin/helpers/browser.sh
CCACHE_BASEDIR=/data/home/nikbash
CCACHE_DIR=/fsx//shared/ccache_dir
CCACHE_MAXSIZE=25Gi
CCACHE_TEMPDIR=/tmp/ccache_tmp_nikbash
CCACHE_UMASK=002
CLUSTER_FAST_HOME=/fsx//users/nikbash
CLUSTER_FAST_MOUNT=/fsx/
CLUSTER_ID=f392b7dc-4dec-47a7-8887-9bcd206c4a79
CLUSTER_WORKSPACE_SYMLINK=/data/home/nikbash/cluster
COLORTERM=truecolor
CONDA_DEFAULT_ENV=sor
CONDA_DIR=/fsx//users/nikbash/conda
CONDA_EXE=/fsx/users/nikbash/conda/bin/conda
CONDA_MKL_INTERFACE_LAYER_BACKUP=
CONDA_PREFIX=/fsx/users/nikbash/conda/envs/sor
CONDA_PREFIX_1=/fsx/users/nikbash/conda
CONDA_PROMPT_MODIFIER=(sor) 
CONDA_PYTHON_EXE=/fsx/users/nikbash/conda/bin/python
CONDA_SHLVL=2
CPATH=/opt/amazon/efa/include:/usr/local/cuda-11.4/include
CPATH_modshare=/opt/amazon/efa/include:1:/usr/local/cuda-11.4/include:2
CUDA_HOME=/usr/local/cuda-11.4
CUDA_NVCC_EXECUTABLE=/data/shared/bin/cuda/nvcc
CUDA_VISIBLE_DEVICES=0,1,2,3
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/2366/bus
DEV_QUEUE=dev
ENV=/usr/share/modules/init/profile.sh
EXTRA_JSON=/home/ubuntu/helper-scripts/extra.json
FI_EFA_MR_CACHE_ENABLE=1
FI_EFA_USE_DEVICE_RDMA=1
FI_OFI_RXR_INLINE_MR_ENABLE=1
FI_OFI_RXR_RX_COPY_OOO=1
FI_OFI_RXR_RX_COPY_UNEXP=1
FI_PROVIDER=efa
GIT_ASKPASS=/data/home/nikbash/.vscode-server/bin/e8a3071ea4344d9d48ef8a4df2c097372b0c5161/extensions/git/dist/askpass.sh
GPU_DEVICE_ORDINAL=0,1,2,3
HOME=/data/home/nikbash
LANG=C.UTF-8
LD_LIBRARY_PATH=/usr/local/cuda-11.4/efa/lib:/usr/local/cuda-11.4/lib:/usr/local/cuda-11.4/lib64:/opt/amazon/efa/lib:/opt/amazon/openmpi/lib:/usr/local/cuda/efa/lib:/usr/local/cuda/lib:/usr/local/cuda:/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64:/usr/local/cuda/targets/x86_64-linux/lib:/usr/local/lib:/usr/lib:
LD_LIBRARY_PATH_modshare=:1:/usr/local/cuda/efa/lib:1:/opt/amazon/efa/lib:2:/usr/local/cuda-11.4/efa/lib:1:/usr/local/lib:1:/usr/local/cuda/targets/x86_64-linux/lib:1:/usr/local/cuda/lib64:1:/usr/local/cuda:1:/usr/local/cuda-11.4/lib64:1:/usr/local/cuda/extras/CUPTI/lib64:1:/opt/amazon/openmpi/lib:1:/usr/local/cuda/lib:1:/usr/local/cuda-11.4/lib:1:/usr/lib:1
LESSCLOSE=/usr/bin/lesspipe %s %s
LESSOPEN=| /usr/bin/lesspipe %s
LIBRARY_PATH=/usr/local/cuda-11.4/efa/lib:/opt/amazon/efa/lib:/usr/local/cuda-11.4/lib
LIBRARY_PATH_modshare=/opt/amazon/efa/lib:1:/usr/local/cuda-11.4/efa/lib:1:/usr/local/cuda-11.4/lib:1
LOADEDMODULES=cuda/11.4:nccl/2.12.7-cuda.11.4:nccl_efa/1.2.0-nccl.2.12.7-cuda.11.4
LOADEDMODULES_modshare=nccl_efa/1.2.0-nccl.2.12.7-cuda.11.4:1:cuda/11.4:1:nccl/2.12.7-cuda.11.4:1
LOGNAME=nikbash
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:
MAIL=/var/mail/nikbash
MANPATH=/opt/aws/neuron/share/man::/opt/slurm/share/man
METASEQ_SAVE_DIR=./test-checkpoint/train.8m.dummy_lm.me_fp16.fsdp.zero2.relu.transformer_lm_megatron.nlay4.emb128.lrnpos.0emb_scale.tps2048.adam.b2_0.95.eps1e-08.cl1.0.lr0.001.endlr0.0001.wu50.dr0.1.atdr0.1.0emb_dr.wd0.1.ms16.uf1.mu50.s1.me5.ngpu4
MKL_INTERFACE_LAYER=LP64,GNU
MODULEPATH=/data/shared/modulefiles:/data/shared/modulefiles:/data/shared/modulefiles:/etc/environment-modules/modules:/usr/share/modules/versions:/usr/share/modules/$MODULE_VERSION/modulefiles:/usr/share/modules/modulefiles:/opt/intel/impi/2019.8.254/intel64/modulefiles
MODULEPATH_modshare=/usr/share/modules/$MODULE_VERSION/modulefiles:1:/etc/environment-modules/modules:1:/opt/intel/impi/2019.8.254/intel64/modulefiles:1:/usr/share/modules/modulefiles:1:/usr/share/modules/versions:1
MODULESHOME=/usr/share/modules
MODULES_CMD=/usr/lib/x86_64-linux-gnu/modulecmd.tcl
NCCL_ALGO=tree
NCCL_ASYNC_ERROR_HANDLING=1
NCCL_DEBUG=INFO
NCCL_DEBUG_FILE=./test-checkpoint/train.8m.dummy_lm.me_fp16.fsdp.zero2.relu.transformer_lm_megatron.nlay4.emb128.lrnpos.0emb_scale.tps2048.adam.b2_0.95.eps1e-08.cl1.0.lr0.001.endlr0.0001.wu50.dr0.1.atdr0.1.0emb_dr.wd0.1.ms16.uf1.mu50.s1.me5.ngpu4/nccl/restart_000/rank_0000_a100-st-p4d24xlarge-21
NCCL_NET_SHARED_BUFFERS=0
NCCL_PROTO=simple
NCCL_ROOT_DIR=/usr/local/cuda-11.4
NCCL_TOPO_FILE=/usr/local/cuda-11.4/efa/share/aws-ofi-nccl/xml/p4d-24xl-topo.xml
NCCL_TREE_THRESHOLD=0
OMP_NUM_THREADS=2
PATH=/usr/local/cuda-11.4/bin:/data/shared/bin:/data/home/nikbash/.vscode-server/bin/e8a3071ea4344d9d48ef8a4df2c097372b0c5161/bin/remote-cli:/fsx/users/nikbash/conda/envs/sor/bin:/fsx/users/nikbash/conda/condabin:/opt/amazon/openmpi/bin:/opt/amazon/efa/bin:/usr/local/cuda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin:/opt/slurm/bin
PATH_modshare=/usr/local/cuda-11.4/bin:1:/fsx/users/nikbash/conda/condabin:1:/usr/bin:1:/opt/amazon/efa/bin:1:/usr/local/bin:1:/data/home/nikbash/.vscode-server/bin/e8a3071ea4344d9d48ef8a4df2c097372b0c5161/bin/remote-cli:1:/data/shared/bin:1:/bin:1:/snap/bin:1:/fsx/users/nikbash/conda/envs/sor/bin:1:/sbin:1:/opt/slurm/bin:1:/usr/sbin:1:/usr/local/sbin:1:/opt/amazon/openmpi/bin:1:/usr/local/cuda/bin:1
PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:
PWD=/data/home/nikbash/metaseq
PYTHONPATH=./slurm_snapshot_code_oss/2023-01-13T12_29_30.717948:
RDMAV_FORK_SAFE=1
REPOS_DIR=/data/home/nikbash/repos/
ROCR_VISIBLE_DEVICES=0,1,2,3
SCAVENGE_QUEUE=scavenge
SHELL=/bin/bash
SHLVL=5
SLURMD_NODENAME=a100-st-p4d24xlarge-21
SLURM_CLUSTER_NAME=cl_f392b7dc4dec47a788879bcd206c4a79
SLURM_CONF=/opt/slurm/etc/slurm.conf
SLURM_CPUS_ON_NODE=1
SLURM_CPU_BIND=quiet,mask_cpu:0x000000000000000000000001
SLURM_CPU_BIND_LIST=0x000000000000000000000001
SLURM_CPU_BIND_TYPE=mask_cpu:
SLURM_CPU_BIND_VERBOSE=quiet
SLURM_GTIDS=0
SLURM_JOBID=82662
SLURM_JOB_ACCOUNT=all
SLURM_JOB_CPUS_PER_NODE=1
SLURM_JOB_GID=2366
SLURM_JOB_ID=82662
SLURM_JOB_NAME=bash
SLURM_JOB_NODELIST=a100-st-p4d24xlarge-21
SLURM_JOB_NUM_NODES=1
SLURM_JOB_PARTITION=train
SLURM_JOB_QOS=normal
SLURM_JOB_UID=2366
SLURM_JOB_USER=nikbash
SLURM_LAUNCH_NODE_IPADDR=10.200.70.103
SLURM_LOCALID=0
SLURM_NNODES=1
SLURM_NODEID=0
SLURM_NODELIST=a100-st-p4d24xlarge-21
SLURM_NPROCS=1
SLURM_NTASKS=1
SLURM_PRIO_PROCESS=0
SLURM_PROCID=0
SLURM_PTY_PORT=33781
SLURM_PTY_WIN_COL=279
SLURM_PTY_WIN_ROW=24
SLURM_SRUN_COMM_HOST=10.200.70.103
SLURM_SRUN_COMM_PORT=33453
SLURM_STEPID=0
SLURM_STEP_GPUS=0,1,2,3
SLURM_STEP_ID=0
SLURM_STEP_LAUNCHER_PORT=33453
SLURM_STEP_NODELIST=a100-st-p4d24xlarge-21
SLURM_STEP_NUM_NODES=1
SLURM_STEP_NUM_TASKS=1
SLURM_STEP_TASKS_PER_NODE=1
SLURM_SUBMIT_DIR=/data/home/nikbash/metaseq
SLURM_SUBMIT_HOST=ip-10-200-70-103
SLURM_TASKS_PER_NODE=1
SLURM_TASK_PID=59233
SLURM_TOPOLOGY_ADDR=a100-st-p4d24xlarge-21
SLURM_TOPOLOGY_ADDR_PATTERN=node
SLURM_UMASK=0002
SLURM_WORKING_CLUSTER=cl_f392b7dc4dec47a788879bcd206c4a79:10.200.95.53:6820:9216:109
SRUN_DEBUG=3
SSH_CLIENT=163.114.131.194 59647 22
SSH_CONNECTION=163.114.131.194 59647 10.200.70.103 22
TERM=xterm-256color
TERM_PROGRAM=vscode
TERM_PROGRAM_VERSION=1.74.2
TMPDIR=/tmp
TORCH_CUDA_ARCH_LIST=6.0;6.1;6.2;7.0;7.2;8.0;8.6
TRAIN_QUEUE=train
USER=nikbash
USER_OS=ubuntu
VSCODE_GIT_ASKPASS_EXTRA_ARGS=
VSCODE_GIT_ASKPASS_MAIN=/data/home/nikbash/.vscode-server/bin/e8a3071ea4344d9d48ef8a4df2c097372b0c5161/extensions/git/dist/askpass-main.js
VSCODE_GIT_ASKPASS_NODE=/data/home/nikbash/.vscode-server/bin/e8a3071ea4344d9d48ef8a4df2c097372b0c5161/node
VSCODE_GIT_IPC_HANDLE=/run/user/2366/vscode-git-abed08b461.sock
VSCODE_IPC_HOOK_CLI=/run/user/2366/vscode-ipc-b199a93f-9d39-49d5-835d-bc5f9aef3888.sock
WORK_TREES=/fsx//users/nikbash/work
XDG_DATA_DIRS=/usr/local/share:/usr/share:/var/lib/snapd/desktop
XDG_RUNTIME_DIR=/run/user/2366
XDG_SESSION_ID=131546
_=/fsx/users/nikbash/conda/envs/sor/bin/python
_CE_CONDA=
_CE_M=
_LMFILES_=/data/shared/modulefiles/cuda/11.4:/data/shared/modulefiles/nccl/2.12.7-cuda.11.4:/data/shared/modulefiles/nccl_efa/1.2.0-nccl.2.12.7-cuda.11.4
_LMFILES__modshare=/data/shared/modulefiles/nccl/2.12.7-cuda.11.4:1:/data/shared/modulefiles/nccl_efa/1.2.0-nccl.2.12.7-cuda.11.4:1:/data/shared/modulefiles/cuda/11.4:1
